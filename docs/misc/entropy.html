<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistics and Machine Learning - 30&nbsp; entropy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../misc/trend_test.html" rel="prev">
<link href="../archive/logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../misc/trend_test.html">miscellaneous</a></li><li class="breadcrumb-item"><a href="../misc/entropy.html"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">entropy</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../archive/logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Statistics and Machine Learning</a> 
        <div class="sidebar-tools-main">
    <a href="https://yairmau.com/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-house-fill"></i></a>
    <a href="https://github.com/yairmau/statistics/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../data/height.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">height data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../data/weight.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">weight data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">hypothesis testing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../t_test/t_test_one_sample.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">one-sample t-test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../t_test/t_test_independent_samples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">independent samples t-test</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">confidence interval</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../confidence_interval/basic_concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">basic concepts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../confidence_interval/analytical_confidence_interval.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">analytical confidence interval</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../confidence_interval/empirical_confidence_interval.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">empirical confidence interval</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">permutation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../permutation/problem-with-t-test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">the problem with t-test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../permutation/permutation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">permutation test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../permutation/numpy-vs-pandas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">numpy vs pandas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../permutation/exact-vs-montecarlo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">exact vs.&nbsp;Monte Carlo permutation tests</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">regression</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regression/geometry-of-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">the geometry of regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regression/least-squares.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">least squares</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regression/equivalence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">equivalence</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regression/partitioning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">partitioning of the sum of squares</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regression/mixed-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">linear mixed effect model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regression/logistic-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">logistic regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regression/logistic_2d.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">logistic 2d</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">correlation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../correlation/correlation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">correlation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../correlation/linear_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">correlation and linear regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../correlation/cosine.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">cosine</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../correlation/significance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">significance (p-value)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">bayes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bayes/from-the-ground-up.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">from the ground up</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bayes/parametric-generative-classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">parametric generative classification</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bayes/odds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">odds and log likelihood</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bayes/logistic-connection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">logistic connection</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">svd and pca</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../svd_and_pca/svd_image_compression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">SVD for image compression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../svd_and_pca/svd_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">SVD for regression</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">miscellaneous</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/trend_test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">trend test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/entropy.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">entropy</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#image-generating-machines" id="toc-image-generating-machines" class="nav-link active" data-scroll-target="#image-generating-machines"><span class="header-section-number">30.1</span> image-generating machines</a></li>
  <li><a href="#surprise" id="toc-surprise" class="nav-link" data-scroll-target="#surprise"><span class="header-section-number">30.2</span> surprise</a></li>
  <li><a href="#information" id="toc-information" class="nav-link" data-scroll-target="#information"><span class="header-section-number">30.3</span> information</a></li>
  <li><a href="#quantifying-surprise-and-information" id="toc-quantifying-surprise-and-information" class="nav-link" data-scroll-target="#quantifying-surprise-and-information"><span class="header-section-number">30.4</span> quantifying surprise and information</a></li>
  <li><a href="#problems-with-the-inverse-formula" id="toc-problems-with-the-inverse-formula" class="nav-link" data-scroll-target="#problems-with-the-inverse-formula"><span class="header-section-number">30.5</span> problems with the inverse formula</a></li>
  <li><a href="#a-new-and-better-formula" id="toc-a-new-and-better-formula" class="nav-link" data-scroll-target="#a-new-and-better-formula"><span class="header-section-number">30.6</span> a new and better formula</a></li>
  <li><a href="#entropy" id="toc-entropy" class="nav-link" data-scroll-target="#entropy"><span class="header-section-number">30.7</span> entropy</a></li>
  <li><a href="#binary-machines" id="toc-binary-machines" class="nav-link" data-scroll-target="#binary-machines"><span class="header-section-number">30.8</span> binary machines</a></li>
  <li><a href="#one-last-example" id="toc-one-last-example" class="nav-link" data-scroll-target="#one-last-example"><span class="header-section-number">30.9</span> one last example</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../misc/trend_test.html">miscellaneous</a></li><li class="breadcrumb-item"><a href="../misc/entropy.html"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">entropy</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">entropy</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button" data-quarto-source-url="https://github.com/yairmau/statistics/blob/main/misc/entropy.ipynb">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Let’s derive the formula for entropy from first principles.</p>
<section id="image-generating-machines" class="level2" data-number="30.1">
<h2 data-number="30.1" class="anchored" data-anchor-id="image-generating-machines"><span class="header-section-number">30.1</span> image-generating machines</h2>
<p>We’re given machines that generate images of cats (😺) and dogs (🐶). See the following outputs from the machines:</p>
<p>machine 1:<br>
<code>😺 😺 😺 😺 😺 🐶</code>, 5 cats and 1 dog</p>
<p>machine 2:<br>
<code>😺 😺 😺 😺 😺 😺 😺 😺 😺 😺 😺 😺 😺 😺</code>, 14 cats and 0 dogs</p>
<p>machine 3:<br>
<code>🐶 😺 🐶 😺 🐶 🐶 🐶 😺 😺 🐶</code>, 4 cats and 6 dogs</p>
<p>machine 4:<br>
<code>🐶 😺 🐶 🐶 🐶 😺 😺 😺 🐶 😺 🐶 😺</code>, 6 cats and 6 dogs</p>
</section>
<section id="surprise" class="level2" data-number="30.2">
<h2 data-number="30.2" class="anchored" data-anchor-id="surprise"><span class="header-section-number">30.2</span> surprise</h2>
<p>How surprised are we by each output?</p>
<p>For machine 2, we wouldn’t be surprised at all if the next image it generates is a cat. It’s been generating only cats so far. However, if it generates a dog, that would be quite surprising.</p>
<p>Machine 4 produced equal numbers of cats and dogs. So we would be equally surprised if the next image is a cat or a dog.</p>
<p>Machines 1 and 3 are somewhere in between.</p>
</section>
<section id="information" class="level2" data-number="30.3">
<h2 data-number="30.3" class="anchored" data-anchor-id="information"><span class="header-section-number">30.3</span> information</h2>
<p>We could say similar things about information. If machine 2 generates another cat, we don’t learn anything new, it’s the same machine as ever. But if it generates a dog, we learn a lot about this machine’s behavior. In contrast, machine 4 generates equal amounts of information whether it produces a cat or a dog, since both have had the same number so far.</p>
<p>To say that we are surprised by an event is the same as saying that we learn some information from it. If an event is not surprising at all, then it doesn’t provide us with any new information.</p>
<blockquote class="blockquote">
<p>The sun will rise tomorrow.</p>
</blockquote>
<p>This is neither surprising nor informative.</p>
<blockquote class="blockquote">
<p>I have a dragon living in my garage.</p>
</blockquote>
<p>This is both surprising and informative.</p>
</section>
<section id="quantifying-surprise-and-information" class="level2" data-number="30.4">
<h2 data-number="30.4" class="anchored" data-anchor-id="quantifying-surprise-and-information"><span class="header-section-number">30.4</span> quantifying surprise and information</h2>
<p>An event that is very likely to happen is not surprising, and doesn’t provide us with much information. An event that is unlikely to happen is surprising, and provides us with a lot of information. It seems reasonable to say that the amount of information <span class="math inline">I</span> we gain from an event <span class="math inline">x</span>, whose probability is <span class="math inline">P(x)</span>, is inversely proportional to the probability:</p>
<p><span class="math display">
I(P(x)) = \frac{1}{P(x)}
\tag{1}
</span></p>
</section>
<section id="problems-with-the-inverse-formula" class="level2" data-number="30.5">
<h2 data-number="30.5" class="anchored" data-anchor-id="problems-with-the-inverse-formula"><span class="header-section-number">30.5</span> problems with the inverse formula</h2>
<p>There are at least two problems with this inverse formula.</p>
<p><strong>Problem one</strong></p>
<p>An event with zero probability would provide us with infinite information. Maybe that’s okay, since I could be infinitely surprised if the sun didn’t rise tomorrow. However, a certain event (probability 1) would provide us with only 1 unit of information. That doesn’t seem right. A certain event should provide us with no information at all, zero.</p>
<p><strong>Problem two</strong></p>
<p>Let’s say that we learn about two completely independent events that happened yesterday, <span class="math inline">x</span> and <span class="math inline">y</span>:</p>
<ul>
<li><span class="math inline">x</span>: My sister flipped a coin and got “heads”.</li>
<li><span class="math inline">y</span>: My cousin has won the lottery.</li>
</ul>
<p>Since the events are independent, the probability that both have happened is the product of their probabilities:</p>
<p><span class="math display">
P(x \text{ and } y) = P(x)P(y)
\tag{2}
</span></p>
<p>Now let’s calculate the information we gained from learning that both events happened:</p>
<p><span class="math display">\begin{align*}
I(P(x \text{ and } y)) &amp;= I(P(x)P(y)) \\
                       &amp;= \frac{1}{P(x)P(y)} \\
                       &amp;= \frac{1}{P(x)} \cdot \frac{1}{P(y)} \\
                       &amp;= I(P(x)) \cdot I(P(y))
                       \tag{3}
\end{align*}</span></p>
<p>The total information I gained is the product of the information I gained from each event. There’s something wrong with that. Assume that my sister flipped a fair coin, so the probability of heads is 1/2. From the inverse formula, this means that the “heads” outcome <strong>doubled</strong> the information I got from yesterday’s events. My surprise from learning that my cousin won the lottery was multiplied by 2 by a mere coin toss. That’s obviously not ok.</p>
<p>What would make sense is if the total information I gained from both events was the <strong>sum</strong> of the information I gained from each independent event. Then, if my sister flipped a fair coin, the information I gained from learning that my cousin won the lottery would be increased by a fixed amount, regardless of how surprising the lottery win was.</p>
</section>
<section id="a-new-and-better-formula" class="level2" data-number="30.6">
<h2 data-number="30.6" class="anchored" data-anchor-id="a-new-and-better-formula"><span class="header-section-number">30.6</span> a new and better formula</h2>
<p>We are looking for a function <span class="math inline">I(P(x))</span> such that:</p>
<ul>
<li><span class="math inline">I(1) = 0</span><br>
A sure event provides no information.</li>
<li><span class="math inline">I(P(x)P(y)) = I(P(x)) + I(P(y))</span><br>
The information from two independent events is the sum of the information from each event.</li>
</ul>
<p>We can guess another formula that satisfies these two properties:</p>
<p><span class="math display">
I(P(x)) = \log\left(\frac{1}{P(x)}\right)
\tag{4}
</span></p>
<ul>
<li>This formula satisfies the first property, since <span class="math inline">\log(1) = 0</span>.</li>
<li>It also satisfies the second property, since <span class="math inline">\log(ab) = \log(a) + \log(b)</span>.</li>
</ul>
<p>Claude Shannon, the father of information theory, proposed this formula in his seminal 1948 paper <a href="https://people.math.harvard.edu/~ctm/home/text/others/shannon/entropy/entropy.pdf">“A Mathematical Theory of Communication”</a>. There, he proved (see Appendix 2) that this is the only function that satisfies three properties, related to the two stated above, but more restrictive. See Shannon’s three properties, stated in Section 6 of his paper, titled “Choice, Uncertainty, and Entropy”.</p>
</section>
<section id="entropy" class="level2" data-number="30.7">
<h2 data-number="30.7" class="anchored" data-anchor-id="entropy"><span class="header-section-number">30.7</span> entropy</h2>
<p>Shannon writes:</p>
<blockquote class="blockquote">
<p>Suppose we have a set of possible events whose probabilities of occurrence are <span class="math inline">p_1, p_2, \ldots, p_n</span>. These probabilities are known but that is all we know concerning which event will occur. Can we find a measure of how much “choice” is involved in the selection of the event or of how uncertain we are of the outcome?</p>
</blockquote>
<p>After introducing the three properties that a measure <span class="math inline">H</span> must satisfy to answer the question above, Shannon presents the formula for the entropy:</p>
<blockquote class="blockquote">
<p>We shall call <span class="math display">
H = - \sum p_i \log(p_i)
\tag{5}
</span> the entropy of the set of probabilities <span class="math inline">p_1, \ldots, p_n</span>.</p>
</blockquote>
<p>This is the standard formula for entropy, but a better rendition is:</p>
<p><span class="math display">
H = \sum P_i \log\left(\frac{1}{P_i}\right)
\tag{6}
</span></p>
<p>(Shannon uses <span class="math inline">p_i</span>, but I’ll go back to using capital <span class="math inline">P</span> for probabilities.)</p>
<p>This formula is better because it clearly answers the following question:</p>
<blockquote class="blockquote">
<p>What would be the expected amount of information (or surprise) we would gain from a probabilistic event?</p>
</blockquote>
<p>We don’t know what image our machines will produce next. But we do know the probabilities of each outcome. So we can calculate the <strong>expected</strong> information from the next image:</p>
<p><span class="math display">
H = \sum_i P(x_i) I(P(x_i)) = \sum_i P(x_i) \log\left(\frac{1}{P(x_i)}\right)
\tag{7}
</span></p>
<p>The information from each possible outcome <span class="math inline">x_i</span> is weighted by the probability of that outcome, and we sum over all possible outcomes.</p>
<p>For instance, machine 1 produces dogs with a probability of 1/6, and cats with a probability of 5/6. The expected information from the next image is the information from a dog times the probability of getting a dog, plus the information from a cat times the probability of getting a cat. If our machine produced <span class="math inline">N</span> possible images, we would do the same, summing over all <span class="math inline">N</span> possible images with their respective probabilities as weights.</p>
</section>
<section id="binary-machines" class="level2" data-number="30.8">
<h2 data-number="30.8" class="anchored" data-anchor-id="binary-machines"><span class="header-section-number">30.8</span> binary machines</h2>
<p>In the example of the machines that produce only two outcomes, we have that one probability is <span class="math inline">P</span> (say, for getting cats) and the other is <span class="math inline">Q=1-P</span>. So we can write the entropy as a function of a single probability:</p>
<p><span class="math display">
H(P) = - P \log(P) - (1-P) \log(1-P)
</span></p>
<div id="cell-6" class="cell" data-execution_count="121">
<details class="code-fold">
<summary>import libraries</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-4"><a href="#cb1-4"></a>sns.set_theme(style<span class="op">=</span><span class="st">"ticks"</span>, font_scale<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="im">import</span> matplotlib.gridspec <span class="im">as</span> gridspec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-7" class="cell" data-execution_count="122">
<details class="code-fold">
<summary>plot</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb2-2"><a href="#cb2-2"></a>p <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">100</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a>eps <span class="op">=</span> <span class="fl">1e-10</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw">def</span> entropy_H(p):</span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="cf">return</span> <span class="op">-</span>p<span class="op">*</span>np.log2(p<span class="op">+</span>eps)<span class="op">-</span>(<span class="dv">1</span><span class="op">-</span>p)<span class="op">*</span>np.log2(<span class="dv">1</span><span class="op">-</span>p<span class="op">+</span>eps)</span>
<span id="cb2-6"><a href="#cb2-6"></a>ax.plot(p, entropy_H(p), label<span class="op">=</span><span class="vs">r"$  H(p)$"</span>)</span>
<span id="cb2-7"><a href="#cb2-7"></a></span>
<span id="cb2-8"><a href="#cb2-8"></a>p_machine1 <span class="op">=</span> <span class="dv">5</span><span class="op">/</span><span class="dv">6</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>ax.plot([p_machine1], [entropy_H(p_machine1)], marker<span class="op">=</span><span class="st">'o'</span>, ls<span class="op">=</span><span class="st">'none'</span>, color<span class="op">=</span><span class="st">'tab:orange'</span>)</span>
<span id="cb2-10"><a href="#cb2-10"></a>ax.text(p_machine1<span class="op">-</span><span class="fl">0.05</span>, entropy_H(p_machine1), <span class="st">"M1"</span>, ha<span class="op">=</span><span class="st">'center'</span>, color<span class="op">=</span><span class="st">'tab:orange'</span>)</span>
<span id="cb2-11"><a href="#cb2-11"></a></span>
<span id="cb2-12"><a href="#cb2-12"></a>p_machine2 <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>ax.plot([p_machine2], [entropy_H(p_machine2)], marker<span class="op">=</span><span class="st">'o'</span>, ls<span class="op">=</span><span class="st">'none'</span>, color<span class="op">=</span><span class="st">'tab:orange'</span>)</span>
<span id="cb2-14"><a href="#cb2-14"></a>ax.text(p_machine2<span class="op">-</span><span class="fl">0.05</span>, entropy_H(p_machine2), <span class="st">"M2"</span>, ha<span class="op">=</span><span class="st">'center'</span>, color<span class="op">=</span><span class="st">'tab:orange'</span>)</span>
<span id="cb2-15"><a href="#cb2-15"></a></span>
<span id="cb2-16"><a href="#cb2-16"></a>p_machine3 <span class="op">=</span> <span class="dv">4</span><span class="op">/</span><span class="dv">10</span></span>
<span id="cb2-17"><a href="#cb2-17"></a>ax.plot([p_machine3], [entropy_H(p_machine3)], marker<span class="op">=</span><span class="st">'o'</span>, ls<span class="op">=</span><span class="st">'none'</span>, color<span class="op">=</span><span class="st">'tab:orange'</span>)</span>
<span id="cb2-18"><a href="#cb2-18"></a>ax.text(p_machine3<span class="op">-</span><span class="fl">0.05</span>, entropy_H(p_machine3), <span class="st">"M3"</span>, ha<span class="op">=</span><span class="st">'center'</span>, color<span class="op">=</span><span class="st">'tab:orange'</span>)</span>
<span id="cb2-19"><a href="#cb2-19"></a></span>
<span id="cb2-20"><a href="#cb2-20"></a>p_machine4 <span class="op">=</span> <span class="dv">6</span><span class="op">/</span><span class="dv">12</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>ax.plot([p_machine4], [entropy_H(p_machine4)], marker<span class="op">=</span><span class="st">'o'</span>, ls<span class="op">=</span><span class="st">'none'</span>, color<span class="op">=</span><span class="st">'tab:orange'</span>)</span>
<span id="cb2-22"><a href="#cb2-22"></a>ax.text(p_machine4, entropy_H(p_machine4)<span class="op">-</span><span class="fl">0.05</span>, <span class="st">"M4"</span>, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'top'</span>, color<span class="op">=</span><span class="st">'tab:orange'</span>)</span>
<span id="cb2-23"><a href="#cb2-23"></a></span>
<span id="cb2-24"><a href="#cb2-24"></a>ax.set_xlabel(<span class="st">"P"</span>)</span>
<span id="cb2-25"><a href="#cb2-25"></a>ax.set_ylabel(<span class="st">"bits"</span>)</span>
<span id="cb2-26"><a href="#cb2-26"></a>ax.set_title(<span class="st">"Binary Entropy Function"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="122">
<pre><code>Text(0.5, 1.0, 'Binary Entropy Function')</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="entropy_files/figure-html/cell-3-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The expected information is zero for machine 2, which certainly produces only cats (<span class="math inline">P=1</span>). The expected information is maximal for machine 4, which produces cats and dogs with equal probabilities (<span class="math inline">P=1/2</span>).</p>
<p>In Equations (5) and (6), we didn’t explicitly say what the base of the logarithm is. It doesn’t matter, since changing the base only changes the units of information. In the example above, we use base 2 because we have a binary choice, and the units for entropy are called bits, suggested by JW Tukey, meaning <em>binary digits</em>.</p>
</section>
<section id="one-last-example" class="level2" data-number="30.9">
<h2 data-number="30.9" class="anchored" data-anchor-id="one-last-example"><span class="header-section-number">30.9</span> one last example</h2>
<p>Consider the frequency of the letters in the Hebrew alphabet (there are 22 letters). The most common letter is “י”, which appears with a frequency of about 11.06%. The least common letter is “ט”, which appears with a frequency of about 1.24%. If we opened a book written in Hebrew to a random page, and picked a random letter on that page, what would be the expected information from that letter?</p>
<div id="cell-10" class="cell" data-execution_count="123">
<details class="code-fold">
<summary>import data and plot</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../archive/data/letter_frequency_hebrew.csv"</span>, sep<span class="op">=</span><span class="st">"</span><span class="ch">\t</span><span class="st">"</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a>fig<span class="op">=</span> plt.figure(<span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a>gs <span class="op">=</span> gridspec.GridSpec(<span class="dv">3</span>, <span class="dv">2</span>, width_ratios<span class="op">=</span>[<span class="dv">1</span>,<span class="fl">0.2</span>], height_ratios<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>])</span>
<span id="cb4-6"><a href="#cb4-6"></a>gs.update(left<span class="op">=</span><span class="fl">0.16</span>, right<span class="op">=</span><span class="fl">0.86</span>,top<span class="op">=</span><span class="fl">0.88</span>, bottom<span class="op">=</span><span class="fl">0.13</span>, hspace<span class="op">=</span><span class="fl">0.05</span>, wspace<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb4-7"><a href="#cb4-7"></a></span>
<span id="cb4-8"><a href="#cb4-8"></a>ax0 <span class="op">=</span> plt.subplot(gs[<span class="dv">0</span>, <span class="dv">0</span>])</span>
<span id="cb4-9"><a href="#cb4-9"></a>ax1 <span class="op">=</span> plt.subplot(gs[<span class="dv">1</span>, <span class="dv">0</span>], sharex<span class="op">=</span>ax0)</span>
<span id="cb4-10"><a href="#cb4-10"></a>ax2 <span class="op">=</span> plt.subplot(gs[<span class="dv">2</span>, <span class="dv">0</span>], sharex<span class="op">=</span>ax0)</span>
<span id="cb4-11"><a href="#cb4-11"></a>ax3 <span class="op">=</span> plt.subplot(gs[:, <span class="dv">1</span>])</span>
<span id="cb4-12"><a href="#cb4-12"></a></span>
<span id="cb4-13"><a href="#cb4-13"></a>bar_width <span class="op">=</span> <span class="fl">0.8</span></span>
<span id="cb4-14"><a href="#cb4-14"></a></span>
<span id="cb4-15"><a href="#cb4-15"></a>ax0.bar(df[<span class="st">'Letter'</span>], df[<span class="st">'Frequency(%)'</span>]<span class="op">/</span><span class="dv">100</span>, width<span class="op">=</span>bar_width)</span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="cf">for</span> i, letter <span class="kw">in</span> <span class="bu">enumerate</span>(df[<span class="st">'Letter'</span>]):</span>
<span id="cb4-17"><a href="#cb4-17"></a>    ax0.text(i, df[<span class="st">'Frequency(%)'</span>][i]<span class="op">/</span><span class="dv">100</span> <span class="op">+</span> <span class="fl">0.002</span>, letter, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb4-18"><a href="#cb4-18"></a>ax0.set_xticklabels(df[<span class="st">'Letter'</span>], rotation<span class="op">=</span><span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>ax0.set_ylabel(<span class="st">'prob. mass function'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb4-20"><a href="#cb4-20"></a>ax0.<span class="bu">set</span>(xlim<span class="op">=</span>(<span class="op">-</span><span class="fl">0.5</span>, <span class="bu">len</span>(df[<span class="st">'Letter'</span>])<span class="op">-</span><span class="fl">0.5</span>))</span>
<span id="cb4-21"><a href="#cb4-21"></a>ax0.text(<span class="fl">0.4</span>, <span class="fl">0.95</span>, <span class="st">'letter frequency'</span>, transform<span class="op">=</span>ax0.transAxes, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'top'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb4-22"><a href="#cb4-22"></a>ax0.text(<span class="fl">0.4</span>, <span class="fl">0.85</span>, <span class="vs">r'$P_i$'</span>, transform<span class="op">=</span>ax0.transAxes, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'top'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb4-23"><a href="#cb4-23"></a></span>
<span id="cb4-24"><a href="#cb4-24"></a>ax1.bar(df[<span class="st">'Letter'</span>], np.log2(<span class="dv">1</span><span class="op">/</span>(df[<span class="st">'Frequency(%)'</span>]<span class="op">/</span><span class="dv">100</span>)), width<span class="op">=</span>bar_width)</span>
<span id="cb4-25"><a href="#cb4-25"></a>ax1.set_ylabel(<span class="st">'self-information</span><span class="ch">\n</span><span class="st">(bits)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb4-26"><a href="#cb4-26"></a>ax1.text(<span class="fl">0.4</span>, <span class="fl">0.95</span>, <span class="st">'letter self-information'</span>, transform<span class="op">=</span>ax1.transAxes, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'top'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb4-27"><a href="#cb4-27"></a>ax1.text(<span class="fl">0.4</span>, <span class="fl">0.85</span>, <span class="vs">r'$\log_2(1/P_i)$'</span>, transform<span class="op">=</span>ax1.transAxes, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'top'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb4-28"><a href="#cb4-28"></a></span>
<span id="cb4-29"><a href="#cb4-29"></a>Hi <span class="op">=</span> (df[<span class="st">'Frequency(%)'</span>]<span class="op">/</span><span class="dv">100</span>) <span class="op">*</span> np.log2(<span class="dv">1</span><span class="op">/</span>(df[<span class="st">'Frequency(%)'</span>]<span class="op">/</span><span class="dv">100</span>))</span>
<span id="cb4-30"><a href="#cb4-30"></a>colors <span class="op">=</span> sns.color_palette(<span class="st">"deep"</span>, n_colors<span class="op">=</span><span class="bu">len</span>(df))</span>
<span id="cb4-31"><a href="#cb4-31"></a><span class="cf">for</span> i, (letter, h) <span class="kw">in</span> <span class="bu">enumerate</span>(<span class="bu">zip</span>(df[<span class="st">'Letter'</span>], Hi)):</span>
<span id="cb4-32"><a href="#cb4-32"></a>    ax2.bar(letter, h, color<span class="op">=</span>colors[i <span class="op">%</span> <span class="bu">len</span>(colors)], width<span class="op">=</span>bar_width)</span>
<span id="cb4-33"><a href="#cb4-33"></a>ax2.set_ylabel(<span class="st">'entropy (bits)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb4-34"><a href="#cb4-34"></a>ax2.<span class="bu">set</span>(yticks<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>])</span>
<span id="cb4-35"><a href="#cb4-35"></a>ax2.set_ylim(<span class="dv">0</span>,<span class="fl">4.5</span><span class="op">/</span><span class="dv">3</span>)</span>
<span id="cb4-36"><a href="#cb4-36"></a>ax2.text(<span class="fl">0.4</span>, <span class="fl">0.95</span>, <span class="st">'letter entropy contribution'</span>, transform<span class="op">=</span>ax2.transAxes, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'top'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb4-37"><a href="#cb4-37"></a>ax2.text(<span class="fl">0.4</span>, <span class="fl">0.85</span>, <span class="vs">r'$P_i\cdot\log_2(1/P_i)$'</span>, transform<span class="op">=</span>ax2.transAxes, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'top'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb4-38"><a href="#cb4-38"></a></span>
<span id="cb4-39"><a href="#cb4-39"></a><span class="co"># Annotate arrow from x=10 to x=20 on ax2</span></span>
<span id="cb4-40"><a href="#cb4-40"></a>ax2.annotate(</span>
<span id="cb4-41"><a href="#cb4-41"></a>    <span class="st">''</span>, </span>
<span id="cb4-42"><a href="#cb4-42"></a>    xy<span class="op">=</span>(<span class="bu">len</span>(df[<span class="st">'Letter'</span>])<span class="op">-</span><span class="dv">1</span>, <span class="fl">0.3</span>), </span>
<span id="cb4-43"><a href="#cb4-43"></a>    xytext<span class="op">=</span>(<span class="dv">10</span>, <span class="fl">0.3</span>), </span>
<span id="cb4-44"><a href="#cb4-44"></a>    arrowprops<span class="op">=</span><span class="bu">dict</span>(arrowstyle<span class="op">=</span><span class="st">'-&gt;'</span>, lw<span class="op">=</span><span class="dv">2</span>, color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb4-45"><a href="#cb4-45"></a>)</span>
<span id="cb4-46"><a href="#cb4-46"></a>ax2.text(<span class="fl">15.5</span>, <span class="fl">0.35</span>, <span class="vs">r'$H=\sum P_i \log_2(1/P_i)$'</span>, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb4-47"><a href="#cb4-47"></a><span class="cf">for</span> spine <span class="kw">in</span> [<span class="st">'top'</span>, <span class="st">'right'</span>]:</span>
<span id="cb4-48"><a href="#cb4-48"></a>    ax0.spines[spine].set_visible(<span class="va">False</span>)</span>
<span id="cb4-49"><a href="#cb4-49"></a>    ax1.spines[spine].set_visible(<span class="va">False</span>)</span>
<span id="cb4-50"><a href="#cb4-50"></a>    ax2.spines[spine].set_visible(<span class="va">False</span>)</span>
<span id="cb4-51"><a href="#cb4-51"></a></span>
<span id="cb4-52"><a href="#cb4-52"></a><span class="co"># Plot stacked bars of the entropy contributions in ax3</span></span>
<span id="cb4-53"><a href="#cb4-53"></a>bottom <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-54"><a href="#cb4-54"></a><span class="cf">for</span> i, H <span class="kw">in</span> <span class="bu">enumerate</span>(Hi):</span>
<span id="cb4-55"><a href="#cb4-55"></a>    p <span class="op">=</span> ax3.bar(<span class="dv">0</span>, H, width<span class="op">=</span>bar_width, label<span class="op">=</span>df[<span class="st">'Letter'</span>][i], bottom<span class="op">=</span>bottom)</span>
<span id="cb4-56"><a href="#cb4-56"></a>    ax3.text(<span class="dv">0</span>, bottom <span class="op">+</span> H<span class="op">/</span><span class="dv">2</span>, <span class="ss">f"</span><span class="sc">{</span>df[<span class="st">'Letter'</span>][i]<span class="sc">}</span><span class="ss">"</span>, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'center'</span>, color<span class="op">=</span><span class="st">'black'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb4-57"><a href="#cb4-57"></a>    bottom <span class="op">+=</span> H</span>
<span id="cb4-58"><a href="#cb4-58"></a>ax3.set_xlim(<span class="op">-</span><span class="bu">len</span>(df[<span class="st">'Letter'</span>])<span class="op">/</span><span class="dv">2</span><span class="op">*</span><span class="fl">0.2</span>, <span class="bu">len</span>(df[<span class="st">'Letter'</span>])<span class="op">/</span><span class="dv">2</span><span class="op">*</span><span class="fl">0.2</span>)</span>
<span id="cb4-59"><a href="#cb4-59"></a>ax3.set_ylim(<span class="dv">0</span>,<span class="fl">4.5</span>)</span>
<span id="cb4-60"><a href="#cb4-60"></a><span class="cf">for</span> spine <span class="kw">in</span> [<span class="st">'left'</span>, <span class="st">'top'</span>, <span class="st">'right'</span>]:</span>
<span id="cb4-61"><a href="#cb4-61"></a>    ax3.spines[spine].set_visible(<span class="va">False</span>)</span>
<span id="cb4-62"><a href="#cb4-62"></a>ax3.yaxis.tick_right()</span>
<span id="cb4-63"><a href="#cb4-63"></a></span>
<span id="cb4-64"><a href="#cb4-64"></a>total_H <span class="op">=</span> np.<span class="bu">sum</span>(Hi)</span>
<span id="cb4-65"><a href="#cb4-65"></a>ax3.axhline(total_H, color<span class="op">=</span><span class="st">'gray'</span>, linestyle<span class="op">=</span><span class="st">':'</span>, linewidth<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb4-66"><a href="#cb4-66"></a>ax3.<span class="bu">set</span>(</span>
<span id="cb4-67"><a href="#cb4-67"></a>    xticks<span class="op">=</span>[],</span>
<span id="cb4-68"><a href="#cb4-68"></a>    yticks<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,total_H],</span>
<span id="cb4-69"><a href="#cb4-69"></a>    yticklabels<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>, <span class="ss">f'H = </span><span class="sc">{</span>total_H<span class="sc">:.2f}</span><span class="ss"> bits'</span>]</span>
<span id="cb4-70"><a href="#cb4-70"></a>)</span>
<span id="cb4-71"><a href="#cb4-71"></a>ax3.tick_params(axis<span class="op">=</span><span class="st">'y'</span>, which<span class="op">=</span><span class="st">'major'</span>, length<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb4-72"><a href="#cb4-72"></a></span>
<span id="cb4-73"><a href="#cb4-73"></a>fig.tight_layout()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/cn/m58l7p_j6j10_4c43j4pd8gw0000gq/T/ipykernel_99634/300921586.py:19: UserWarning: set_ticklabels() should only be used with a fixed number of ticks, i.e. after set_ticks() or using a FixedLocator.
  ax0.set_xticklabels(df['Letter'], rotation=0);
/var/folders/cn/m58l7p_j6j10_4c43j4pd8gw0000gq/T/ipykernel_99634/300921586.py:74: UserWarning: This figure includes Axes that are not compatible with tight_layout, so results might be incorrect.
  fig.tight_layout();</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="entropy_files/figure-html/cell-4-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The expected information would be 4.14 bits. Because Hebrew has structure (like any other language), this is less than the maximum possible information. If all 22 letters were equally likely, the expected information would be:</p>
<p><span class="math display">\begin{align*}
H_\text{max} &amp;= \sum_{i=1}^{22} \frac{1}{22} \log_2\left(\frac{1}{\frac{1}{22}}\right) \\
             &amp;= \log_2(22) \\
             &amp;\approx 4.46 \text{ bits}
\end{align*}</span></p>
<p>From this exercise, we learned that in the case that all outcomes are equally likely, the entropy is simply the logarithm of the number of possible outcomes. This is a useful fact to remember.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../misc/trend_test.html" class="pagination-link" aria-label="trend test">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">trend test</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>